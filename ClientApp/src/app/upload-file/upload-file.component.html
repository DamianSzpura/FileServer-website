<div class="upload__background--color">
  <div class="img--size img--background justify-content-center">
    <label for="uploader-input" class="upload-label"
           ng2FileDrop
           [ngClass]="{'another-file-over-class': hasAnotherDropZoneOver}"
           (onFileDrop)="upload($event)"
           [uploader]="uploader">
      CLICK OR DRAG TO UPLOAD
    </label>
    <input #file type="file" multiple (change)="upload(file.files)" id="uploader-input" style="display:none" />
    <br />
    <div class="progress" style="margin: 10px">
      <div class="progress--background"></div>
      <div id="prog-bar" class="progress-bar" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 1%">
        <span class="sr-only">{{progress}}%</span>
      </div>
    </div>

    <span *ngIf="message">
      {{message}}
    </span>
  </div>
</div>

<div class='row'>
  <div class='col-4 justify-content-left'>
    <app-file-operation [selectedFile]="selectedFile"></app-file-operation>
  </div>
  <div class='col-8'>
    <form [formGroup]="searchForm" class="form-inline my-2 my-lg-0">
      <div class="form-group">
        <input type="text" formControlName="search" class="form-control mr-sm-2" placeholder="Search">
      </div>

      <div class="form-group">
        <button class="btn btn-secondary my-2 my-sm-0" type="submit" (click)="onSearch()">Search</button>
      </div>
    </form>
    <div class="row justify-content-center no-gutters">
      <div *ngIf="currentFolder.length > 1" class="col flex-grow-0">
        <div class="card__file">
          <div class="card__header"><p>Return</p></div>
          <div class="card card--box rounded-0" (dblclick)="closeFolder()">
            <div class="card-body">
              <div class="card__inside-box">
                <i class="fas fa-undo fa-3x"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col flex-grow-0" *ngFor="let file of files">
        <div *ngIf="file.extension; else noExtension" class="card__file">
          <div class="card__header"><p>{{file.name}}</p></div>
          <div id="{{file.name}}" class="card card--box rounded-0" (click)="select(file)" (dblclick)="download(file.name)">
            <div class="card-body">
              <div class="card__inside-box">
                <p>{{file.extension}}</p>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noExtension>
          <div class="card__header"><p>{{file.name}}</p></div>
          <div id="{{file.name}}" class="card card--box rounded-0" (click)="select(file)" (dblclick)="openFolder(file.name)">
            <div class="card-body">
              <div class="card__inside-box">
                <i class="far fa-folder fa-3x"></i>
              </div>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<!--<div id="{{file}}" class="card-footer">
  <button class="btn btn-danger" (click)="delete(file)">
    DELETE
  </button>
</div> -->
